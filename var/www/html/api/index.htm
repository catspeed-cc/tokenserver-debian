<html>
<head>
    <title>catspeed tokenserver-debian API</title>
</head>
<body>

The tokenserver API is located at api/v1/<br />

<br />

You _must_ put a trailing slash at the end. I am trying to fix this but it is not a big deal.<br />

<br />

Once the api is finalized, I may add endpoints, but to remove or significantly change an endpoint will involve an API version increase.</br>

<br />

<h1>api v1</h1>
<ul>
    <li><a href='api/v1/get_tokens/'>api/v1/get_tokens/</a> - get tokens from database</li>
    <li><a href='api/v1/get_localstats/'>api/v1/get_localstats/</a> - get local tokenserver stats (not yet implemented)</li>
    <li><a href='api/v1/get_globalstats/'>api/v1/get_globalstats/</a> - get global tokenserver stats (not yet implemented)</li>
</ul>

<br />

<!-- Explain each endpoint -->

<h3>API endpoints</h3>

<h4><a href='api/v1/get_tokens/'>api/v1/get_tokens/</a></h4>
Gets a unique set of tokens from the database. Example:<br />
<pre>
{
  server_id: 'catspeed1',
  po_token: 'MnRII_rriQ1IMEgbc06NoNxjb6aFd_L0ygLQTFv6c7C00OHZstKYCH1_ZE1NDlzF503tXCpooZzf-NlqpywQ0btzSFCiqNjDyCvqWo9uEKzpjBamtXgCI5N5lpMWTVWIV6AYqDO1yswhwv8pbv6uLR1oUoiEpw==',
  visitor_data: 'CgtzMUZiemNTc1NJUSjxh_S5BjIKCgJDQRIEGgAgbg%3D%3D',
  error: 'OK'
}
</pre>
<br />

<h4><a href='api/v1/get_localstats/'>api/v1/get_localstats/</a></h4>
Gets local token server stats. Example:<br />
<pre>
{
  data: 'hello world :3c',
  error: 'OK'
}
</pre>
<br />

<h4><a href='api/v1/get_globalstats/'>api/v1/get_globalstats/</a></h4>
Gets global token server stats. Calculated by master server based off each server's localstats. Example:<br />
<pre>
{
  data: 'hello world :3c',
  error: 'OK'
}
</pre>
<br />

<h4>errors</h4>
There is error if "error" not equals "OK" Example:<br />
<pre>
{
  data: 'hello world',
  moredata: 'hihi :3c',
  error: 'OK'
}

{
  error: 'out of tokens: server out of tokens, please try again later'
}

{
  error: 'too busy: server too busy, please try again later'
}

{
  error: 'endpoint disabled: server administrator has disabled this endpoint'
}
</pre>
<br />

<!-- end of file -->
<br />

</body>
</html>